<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Code Challenge: A Game of Hangman</title>
  </head>
  <body>
    <script>
      // FUNCTION: add the formatStringNicely function to String.prototype
      String.prototype.formatStringNicely = function() {
        return this.charAt(0).toUpperCase() + this.slice(1).toLowerCase() // this.charAt() is faster than this[0]
      }

      // Get the name of a player, format that name, and greet the player
      var getName = function(){
        var name = prompt("What's your name?")
        return name.formatStringNicely()
      }
      var greetPlayer = function(playerName){
        alert("Hi, " + playerName + "! How about a game of Hangman?")
      }

      // Pick a word randomly from an array chosen at random
      var capitals = ["ankara", "paris", "athens", "london", "jakarta", "berlin", "helsinki", "stockholm"]
      var morningDrinks = ["coffee", "tea", "water", "oj", "milk", "smoothie", "espresso"]
      var aromatherapyScents =["huckleberry", "rose", "jasmine", "bergamont", "vanilla", "lavender", "hyssop", "orange"]

      var defaultListArray = [capitals, morningDrinks, aromatherapyScents]


      var pickWordList = function(listArray){
        return listArray[Math.floor(Math.random()* listArray.length)]
      }
      var pickWord = function (wordList){
        return wordList[Math.floor(Math.random()* wordList.length)]
      }

      /* FUNCTION: inform player that word has been chosen and what the category is
      var findCategory = function(listArray, selectedList){
        for (var i=0;i>listArray.length; i++){
          if (listArray[i] == selectedList){
            break;
          }
        }
        return listArray[i]
      }
      var announceWordSelected = function(category, word){
        alert("A random word has been selected from the category " + category + " and it consists of " + word.length + " letters")
      }*/

      // Translate the selectedWord into blanks
      var setupAnswerArray = function(){
        var answerArr = []
        for (var i=0; i<selectedWord.length; i++){
          answerArr[i] = "_"
        }
        return answerArr
      }

      // Setting up a counter to show remaining letters within word
      var remainingLetters = function(){ //counter re # of words to be guessed
        return selectedWord.length
      }

      // Show current state of answerArray
      var showPlayerProgress = function(){
        return answerArray.join(" ")  //show player their progress by printing out current state of answerArray
      }

      //FUNCTION: iterates thru each letter of the selectedWord to see if guessed letter === selectedWord[i]
      var matchLetter = function(guess){
        for (var j=0; j<selectedWord.length; j++){
          var notFound = true;
          if (selectedWord[j] === guess){
            notFound = false;
            answerArray[j] = guess;
            letterCounter--;     // this does not work (why???)
            break;
          }
        }
        if (notFound) {
          alert("The letter \'" + guess + "\' doesn't exist.")
        }
      }

      // FUNCTION: alerts re status of the game after the game is over
      var answerKey = function(word){
        return "The answer was \'" + word + "\'."
      }
      var quitGameAndShowAnswer = function(revealedanswerKey){
        alert(revealedanswerKey + " Better luck next time! :D");
      }
      var showAnswerAndCongratulatePlayer = function(revealedanswerKey){
        alert("Good game! " + revealedanswerKey)
      }
      var endOfGameMessage = function(selectedWord, remainingLettersCounter){
        if (remainingLettersCounter === 0){
          showAnswerAndCongratulatePlayer(answerKey(selectedWord))
        } else {
          quitGameAndShowAnswer(answerKey(selectedWord))
        }
      }

      // Game time! Code for actual game
      var getGuess = function(){
        while (letterCounter > 0) {
          alert(showPlayerProgress(answerArray))
          var guess = prompt("Guess a letter or type 'quit' to stop playing")
          if (guess === 'quit' || guess === null){
            alert("OK-let's play next time!")
            break;
          }
          else if (guess === 'cheat'){
            answerArray = selectedWord.split("")
            letterCounter = 0
          }
          else if (guess.length !== 1){
            alert("Please guess only one letter at a time!")
          }
          else {
            matchLetter(guess)
          }
        }
      }

      //**** START: PROGRAM CODE **** //
      greetPlayer(getName())
      var selectedList = pickWordList(defaultListArray)
      var selectedWord = pickWord(selectedList)
      var answerArray = setupAnswerArray(selectedWord)
      var letterCounter = remainingLetters()
      console.log("Value prior to getGuess: " + selectedList, selectedWord, answerArray, letterCounter)

      getGuess()
      console.log("Value prior to getGuess: " + selectedList, selectedWord, answerArray, letterCounter)
      //**** END: PROGRAM CODE   **** //

    </script>
  </body>
</html>

<!--
ISSUE 1: answerArray does not update
ISSUE 2: not updating letterCounter
ISSUE 3: won't allow else statetment within matchWord... spits out alert from else statement a number of times
-->
