<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Code Challenge: A Game of Hangman</title>
  </head>
  <body>
    <script>
      // FUNCTION: add the formatStringNicely function to String.prototype
      String.prototype.formatStringNicely = function() {
        return this.charAt(0).toUpperCase() + this.slice(1).toLowerCase() // this.charAt() is faster than this[0]
      }
      // Setting up pickWord
      var drinks = ["tea", "water", "oj", "milk"]
      var defaultListArray = [drinks]
      var pickWordList = function(listArray){
        return listArray[Math.floor(Math.random()* listArray.length)]
      }
      var pickWord = function (wordList){
        return wordList[Math.floor(Math.random()* wordList.length)]
      }

      // Translate the selectedWord into blanks
      var setupAnswerArray = function(pickedWord){
        var answerArr = []
        for (var i=0; i<pickedWord.length; i++){
          answerArr[i] = "_"
        }
        return answerArr
      }

      // Setting up a counter to show remaining words
      var remainingLetters = function(pickedWord){ //counter re # of words to be guessed
        return pickedWord.length
      }

      // Show current state of answerArray
      var showPlayerProgress = function(currentAnswerArray){
        return currentAnswerArray.join(" ")  //show player their progress by printing out current state of answerArray
      }

      //*******************************************************************************************//
      var matchLetter = function(word, arr, guess){
        for (var j=0; j<word.length; j++){
          var notFound = true;
          if (word[j] === guess){
            notFound = false;
            arr[j] = guess;
            letterCounter--;     // this does not work (why???)
            break;
          }
        }
        if (notFound) {
          alert("The letter \'" + guess + "\' doesn't exist.")
        }
      }

      // Game time! Code for actual game
      var getGuess = function(word, answerArray){
        while (letterCounter > 0) {
          alert(showPlayerProgress(answerArray))
          var guess = prompt("Guess a letter or type 'quit' to stop playing") // take input from the player
          if (guess === 'quit' || guess === null){
            alert("OK-let's play next time!")
            break;
          }
          else if (guess === 'cheat'){
            // answerArray = ["m", "i", "l", "k"]
            letterCounter = 0
            // console.log(answerArray)
          }
          else if (guess.length !== 1){
            alert("Please guess only one letter at a time!")
          }
          else {
            matchLetter(word, answerArray, guess)
          }
        }
      }


      //**** START: PROGRAM CODE **** //
      var selectedList = pickWordList(defaultListArray)
      console.log("Initial value of selectedList:" + selectedList)
      var selectedWord = pickWord(selectedList)
      console.log("Initial value of selectedWord:" + selectedWord)
      var answerArray = setupAnswerArray(selectedWord)
      console.log("Initial value of answerArray:" + answerArray)
      var letterCounter = remainingLetters(selectedWord)
      console.log("Initial value of letterCounter:" + letterCounter)

      getGuess(selectedWord, answerArray, letterCounter)

      console.log("answerArray after getGuess():" + answerArray)
      console.log("letterCounter after getGuess():" + letterCounter)
      console.log("PlayerProgress after getGuess():" + showPlayerProgress(answerArray))

    </script>
  </body>
</html>
