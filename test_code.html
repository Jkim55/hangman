<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Code Challenge: A Game of Hangman</title>
  </head>
  <body>
    <script>

    var initialLetterCounter = function(word){
      return word.length
    }
    var selectedWord = "milk"
    var remainingLetters = initialLetterCounter(selectedWord)
    var answerArray = ["_", "_", "_", "_"]

    // FUNCTION: alerts re status of the game after the game is over
    var answerKey = function(word){
      return "The answer was \'" + word + "\'."
    }
    var quitGameAndShowAnswer = function(revealedanswerKey){
      alert(revealedanswerKey + " Better luck next time! :D");
    }
    var showAnswerAndCongratulatePlayer = function(revealedanswerKey){
      alert("Good game! " + revealedanswerKey)
    }
    var endOfGameMessage = function(word, counter){
      if (counter === 0){
        showAnswerAndCongratulatePlayer(answerKey(word))
      } else {
        quitGameAndShowAnswer(answerKey(word))
      }
    }

    // var matchLetter = function(word, arr, counter, guess){
    //   for (var j=0; j<word.length; j++){
    //     if (word[j] === guess.toString()){
    //       arr[j] = guess;
    //       counter--;
    //       break;
    //     }
    //     else {
    //       alert("The letter " + guess + " doesn't exist.")
    //     }
    //   }
    // }

    var getGuess = function(remainingLetters, answerArray, selectedWord){
      while (remainingLetters > 0) {
        alert(answerArray.join(" "))  //show player their progress
        var guess = prompt("Guess a letter or type 'quit' to stop playing") // take input from the player
        if (guess === 'quit' || guess === null){
          alert("OK-let's play next time!")
          break;
        }
        else if (guess === 'cheat'){
          answerArray = ["m", "i", "l", "k"]
          remainingLetters = 0
        }
        else if (guess.length !== 1){
          alert("Please guess only one letter at a time!")
        }
        else {
          // matchLetter(selectedWord, answerArray, remainingLetters, guess)
          // break;
          for (var j=0; j<selectedWord.length; j++){
            if (selectedWord[j] === guess){
              answerArray[j] = guess;
              remainingLetters--;  // When remainingLetters > 0, the game is finished.
            }
          }
        }
      }
      endOfGameMessage(selectedWord, remainingLetters)  // *** outside of while loop
      console.log(remainingLetters, answerArray, selectedWord)
    }


  // TO RUN GAME:
  getGuess(remainingLetters, answerArray, selectedWord)

    </script>
  </body>
</html>
